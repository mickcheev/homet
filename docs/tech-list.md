# 1. Цель
    Создать сервер, держащий в себе markdown заметки

# 2. Описание системы

## 2.1 Функциональные блоки системы
    1. Авторизация по jwt ключу
    2. Регистрация
    3. Привязка аккаунта пользователя к telegram аккауту
    4. Создание и редактирование заметок
    5. Реализация REST API методов для работы с бизнес логикой
    6. Дублирование методов, но с Telegram, как внешним интерфейсом.
    7. Управление паролями
    
## 2.2 Описание взаимодействия бизнес логики и фреймворков
    Бизнес логика максимально изолирована от внешний интерфейсов и принимает лишь сериализованные данные из
    адаптеров. Работа с базой данных вшита в бизнес логику.
    
## 2.3 Стек технологий
    * Python
    * FastAPI
    * Peewee
    * Docker
    
## 2.4  Базовые ограничения на запросы по заметкам
    Все запросы в бизнес логике будут вызываться с аргументом в виде id пользователя. Это позволит избежать написания лишних фильтров и
    обезопасит работу системы и доступ 3 лиц к заметкам. Заметку можно будет получить исключительно в виде объекта их списка "заметки пользователя".
    
## 2.5 Проверка подлинности пользователя
    Перед каждым запросом, имеющим возможность ввода в базу данных, будет проверяться подлинность и существование этого самого пользователя. Для этого
    будет использоваться механизм JWT ключа. Каждый запрос будет идентифицироваться таким образом. 

## 2.6 Поведение при ошибках доступа к данным
    В случае, если пользователь пытается получить доступ к несуществующей заметке, FastAPI будет отправлять ответ, сообщающий об ошибке.
    По виду исключения, будет отправляться соответствующий ответ.

## 2.7 Сущности системы

> ? - помечены необязательные поля

1. Пользователь
    * Имя 
    * Фамилия
    * Электронная почта
    * Пароль (хеш пароля)
    * Дата присоединения
    * Ссылка на telegram ?

2. Заметка
    * Владелец (сслыка на пользователя)
    * Название
    * Дата создания
    * Дата последнего изменения
    * Содержание (непрерывный markdown текст)
    * Разрешение (1. читают все, 2. персональное использование)
    * узел (ссылка на узел)

3. Картинка 
    * id (числовой)
    * Заметка (ссылка)
    * Путь до файла

4. Аудио
    * id (числовой)
    * Заметка (ссылка)
    * Путь до файла

5. JWT ключ
    * Нынешний ключ
    * Ключ восстановления
    * Дата создания последнего ключа
    * Пользователь (ссылка)

6. Узел
    * корневой (логический)
    * родитель (сслыка на самого себя)
    * владелец (ссылка на пользователя)
    * имя (строка)

## Точка входа сервера
    Сервер запускается из файла main.py из корня src
    
# Последовательность действий создания приложение
    1. Общие сущности бизнес логики
    2. Сценарии бизнес логики
    3. Прикручивание внешних интерфейсов
    4. Написание интерфейсам разрешений на чтение и на запись определённых ресурсов





